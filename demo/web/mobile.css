/* Enhanced mobile responsive design for PDF Editor */

/* Standard mobile responsive design for PDF Editor */

/* Keep default positioning/visibility from viewer.css; mobile tweaks only in media queries below */


/* Mobile toolbar button styling */
.editorParamsToolbar button:not(.toggle-button) {
  margin: 5px !important;
  padding: 8px 12px !important;
  font-size: 14px !important;
  min-height: 36px !important;
  touch-action: manipulation !important;
}

/* Normalize editor params toolbars across all tools */
.editorParamsToolbar.menu {
  /* Avoid double padding since .menu adds padding-block in viewer.css */
  padding-block: 0;
}
.editorParamsToolbar .menuContainer {
  /* Unify with editorParamsToolbarContainer spacing */
  padding-inline: 10px;
  padding-block: 10px;
  box-sizing: border-box;
  /* Improve touch scroll: prevent panel scroll from dragging the page */
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
}
/* Ensure same scroll behavior for non-menu containers too */
.editorParamsToolbar .editorParamsToolbarContainer {
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch;
}

/* Ensure parameter toolbars render above the viewer and not clipped */
.editorParamsToolbar {
  z-index: 10000;
  /* keep within viewport height on phones; allow internal scroll */
  max-height: calc(100vh - var(--toolbar-height) - 12px);
  overflow-y: auto;
}

/* Prevent clipping of doorhangers by toolbar containers on narrow screens */
#toolbarContainer,
#toolbarContainer #toolbarViewer,
#toolbarContainer .toolbarButtonWithContainer {
  overflow: visible !important;
}


#editorFreeTextParamsToolbar .editorParamsSetter:hover {
  background: rgba(255, 255, 255, 0.9);
  border-color: rgba(0, 123, 255, 0.4);
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(0, 123, 255, 0.15);
}

#editorFreeTextParamsToolbar .editorParamsSetter:last-child {
  margin-bottom: 0;
}

/* Standard mobile responsive design for PDF Editor */

/* Responsive adjustments for FreeText toolbar */
@media (max-width: 768px) {
  #editorFreeTextParamsToolbar .editorParamsToolbarContainer {
    padding: 12px;
    margin: 0 -5px;
  }

  #editorFreeTextParamsToolbar .editorParamsSetter {
    flex-direction: column;
    align-items: stretch;
    gap: 8px;
    padding: 10px;
  }

  #editorFreeTextParamsToolbar .editorParamsLabel {
    text-align: center;
    min-width: auto;
    margin-bottom: 4px;
  }

  #editorFreeTextParamsToolbar .editorParamsColor {
    width: 60px;
    height: 45px;
    align-self: center;
  }

  #editorFreeTextParamsToolbar .editorParamsSlider {
    width: 100%;
    align-self: stretch;
  }
}

@media (max-width: 480px) {
  #editorFreeTextParamsToolbar .editorParamsToolbarContainer {
    padding: 10px;
  }

  #editorFreeTextParamsToolbar .editorParamsSetter {
    padding: 8px;
  }

  #editorFreeTextParamsToolbar .editorParamsLabel {
    font-size: 13px;
  }

  #editorFreeTextParamsToolbar .editorParamsColor {
    width: 55px;
    height: 42px;
  }
}

/* Large tablets and small desktops */
@media (max-width: 1024px) {
  #toolbarViewer .toolbarHorizontalGroup {
    gap: 8px;
    padding: 0 8px;
  }

  #editorModeButtons .toolbarButtonWithContainer {
    margin: 0 2px;
  }

  .editorParamsToolbar {
    max-width: 280px;
  }
}

/* Tablets */
@media (max-width: 768px) {
  /* Hide text labels on toolbar buttons to save space */
  #toolbarViewer button > span {
    display: none;
  }

  /* Hide zoom controls on mobile */
  #scaleSelectContainer {
    display: none;
  }

  /* Make page number input more compact */
  #pageNumber {
    max-width: 56px;
    font-size: 14px;
  }

  /* Reduce gaps between toolbar items */
  #toolbarViewer .toolbarHorizontalGroup {
    gap: 6px;
    padding: 0 6px;
  }

  /* Stack editor buttons vertically on very narrow screens */
  #editorModeButtons {
    flex-wrap: wrap;
    gap: 4px;
  }

  #editorModeButtons .toolbarButtonWithContainer {
    flex: 0 0 auto;
    margin: 0;
  }

  /* Make editor parameter toolbars more mobile-friendly */
  .editorParamsToolbar {
    max-width: 260px;
  }

  .editorParamsToolbarContainer {
    padding: 12px;
  }

  .editorParamsSetter {
    margin-bottom: 12px;
  }

  .editorParamsLabel {
    font-size: 13px;
    margin-bottom: 6px;
  }

  .editorParamsSlider {
    width: 100%;
  }

  /* Improve color picker size */
  .editorParamsColor {
    width: 40px;
    height: 32px;
  }

  /* Better spacing for dialogs */
  .dialog {
    margin: 10px;
    max-width: calc(100vw - 20px);
    max-height: calc(100vh - 20px);
  }
}

/* Mobile phones */
@media (max-width: 480px) {
  /* Show only essential toolbar items */
  /* Do not hide primary toolbar items on phones; keep official layout */
  #toolbarViewerLeft .toolbarHorizontalGroup > *:not(#viewFindButton):not(#sidebarToggleButton) {
    display: initial;
  }

  /* Even smaller gaps */
  #toolbarViewer .toolbarHorizontalGroup {
    gap: 4px;
    padding: 0 4px;
  }

  /* Stack editor mode buttons */
  /* Keep editor buttons inline on phones; allow wrap if space is tight */
  #editorModeButtons {
    flex-direction: row;
    align-items: center;
    gap: 4px;
    flex-wrap: wrap;
  }

  #editorModeButtons .toolbarButtonWithContainer {
    width: auto;
    margin: 0;
  }

  #editorModeButtons .toolbarButton {
    width: auto;
    padding: 0; /* use default viewer sizing */
  }

  /* Compact editor parameter toolbars */
  .editorParamsToolbar {
    max-width: 240px;
  }

  .editorParamsToolbarContainer {
    padding: 10px;
  }

  .editorParamsSetter {
    margin-bottom: 10px;
  }

  /* Smaller input controls */
  .editorParamsSlider {
    height: 24px;
  }

  .editorParamsColor {
    width: 36px;
    height: 28px;
  }

  /* Improve touch targets */
  .toolbarButton {
    min-height: 44px;
    min-width: 44px;
  }

  /* Better dialog sizing for mobile */
  .dialog {
    width: 95vw !important;
    height: 90vh !important;
    max-width: none;
    max-height: none;
    margin: 5vh 2.5vw;
  }

  .mainContainer {
    padding: 15px;
  }

  /* Improve form elements for touch */
  input[type="text"],
  input[type="email"],
  textarea {
    font-size: 16px; /* Prevents zoom on iOS */
    padding: 12px;
  }

  /* Better spacing for mobile dialogs */
  .dialogButtonsGroup {
    flex-direction: column;
    gap: 10px;
  }

  .dialogButtonsGroup button {
    width: 100%;
    margin: 0;
  }
}

/* Very small screens */
@media (max-width: 360px) {
  /* Hide even more elements */
  #toolbarViewerMiddle {
    display: none;
  }

  /* Make remaining buttons more compact */
  .toolbarButton {
    min-height: 40px;
    min-width: 40px;
    padding: 6px;
  }

  /* Simplify editor parameter toolbars */
  .editorParamsToolbar {
    max-width: 200px;
    padding: 8px;
  }

  .editorParamsToolbarContainer {
    padding: 8px;
  }

  /* Stack parameters vertically */
  .editorParamsSetter {
    display: flex;
    flex-direction: column;
    align-items: stretch;
    gap: 8px;
  }

  .editorParamsLabel {
    text-align: center;
    margin-bottom: 0;
  }
}

/* Touch device optimizations */
@media (pointer: coarse) {
  /* Larger touch targets */
  .toolbarButton,
  button,
  input,
  select {
    min-height: 44px;
    min-width: 44px;
  }

  /* Better spacing for touch */
  .toolbarHorizontalGroup {
    gap: 8px;
  }

  /* Improve dropdown positioning */
  .editorParamsToolbar {
    /* Keep default absolute positioning from viewer.css (doorHanger logic). */
    /* Only constrain width for touch devices to keep within viewport. */
    max-width: min(90vw, 320px);
    width: auto;
  }
}

/* Landscape orientation on mobile */
@media (max-width: 896px) and (orientation: landscape) {
  /* Reduce vertical space usage */
  #toolbarContainer {
    min-height: 48px;
  }

  /* Hide non-essential elements */
  #secondaryToolbar {
    display: none;
  }

  /* Compact editor toolbars */
  .editorParamsToolbar {
    max-height: 60vh;
    overflow-y: auto;
  }
}


/* Alias .toggle-button to behave like .toggleButton (viewer.css parity) */
.toggle-button {
  display: inline;
}
.toggle-button:has(> input:checked) {
  color: var(--toggled-btn-color);
  background-color: var(--toggled-btn-bg-color);
}
.toggle-button:is(:hover, :has(> input:focus-visible)) {
  color: var(--toggled-btn-color);
  background-color: var(--button-hover-color);
}
.toggle-button > input {
  position: absolute;
  top: 50%;
  left: 50%;
  opacity: 0;
  width: 0;
  height: 0;
}

/* Scoped fixes for Highlight panel toggler ("Show all") */
#highlightParamsToolbarContainer #editorHighlightVisibility {
  padding-bottom: 8px;
}

#highlightParamsToolbarContainer #editorHighlightVisibility .toggler {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding-block: 4px 8px;
}

/* Force compact switch size and prevent overflow/artifacts */
#highlightParamsToolbarContainer #editorHighlightVisibility .toggle-button {
  display: inline-block !important;
  position: relative !important;
  overflow: hidden !important;
  padding: 0 !important;
  margin: 0 !important;
  min-height: 0 !important;
  height: var(--toggle-height) !important; /* 16px by default */
  width: var(--toggle-width) !important;   /* 32px by default */
  box-sizing: content-box !important;
}
